# 选股助手 - 股票筛选分析系统

## 项目简介

选股助手是一个基于Vue3 + Element Plus开发的股票筛选分析web应用。系统提供多维度的股票筛选功能，帮助投资者根据基本面、技术面、资金面等指标快速筛选出符合条件的优质股票。

## 功能特性

### 核心功能
- 🔐 **用户登录**：安全的用户认证系统，支持登录状态管理
- 🎯 **多维度筛选**：支持基本面、技术面、资金面三大维度筛选
- 📊 **实时数据**：Mock数据模拟真实股票数据
- 🖱️ **优化交互体验**：
  - 点击筛选项直接弹出范围选择器
  - 点击数据范围即时选中，无需确认步骤
  - 数据范围高亮显示，提供即时视觉反馈
  - 选择器互斥显示，同时只能打开一个选择器
  - 支持单个数据范围的快速取消
- 📱 **响应式设计**：适配PC端和移动端显示
- 🔍 **详情查看**：支持查看股票详细信息
- 🔗 **股票代码链接**：点击股票代码可直接跳转到对应的股票详情页面
- 📈 **即时结果展示**：筛选条件下方直接显示结果表格
- 🎨 **紧凑布局**：优化页面布局，提高空间利用率

### 筛选维度

#### 基本面筛选
- 营业收入（亿元）：5以下、5~10、10~20、20~50、50以上
- 市盈率（%）：10以下、10~20、20~30、30~40
- 销售毛利率（%）：5以下、5~20、20~35、35~40、40以上
- ROE（%）：5以下、5~10、10~20、20以上
- 净利润（亿元）：亏损、0~1、1~3、3~5、5以上
- 市净率（%）：1以下、1~1.5、1.5~2、2~3、3以上
- 资产负债率（%）：10以下、10~15、15~30、30以上

#### 技术面筛选
- MACD：金叉、底背离、拐头向上、0轴金叉
- KDJ：金叉、底背离、拐头向上
- BOLL：突破上轨、突破下轨、突破中轨、开口向上
- 单k组合：大阳线、小阳星、向上跳空缺口、向下跳空、长下影线、长上影线
- 均线：多头排列、均线粘合、股价站上5日线、股价站上60日线

#### 资金面筛选
- 大单净量：小于0、0~1、1~3、大于3
- 大单金额（万元）：小于0、0~1000、1000~5000、大于5000
- 陆股通净流入（万元）：小于0、0~1000、1000~5000、5000~10000、大于10000

## 技术栈

- **前端框架**：Vue 3.4.0
- **路由管理**：Vue Router 4.x
- **UI库**：Element Plus 2.5.0
- **构建工具**：Vite 5.4.0
- **HTTP客户端**：Axios 1.6.8
- **图标库**：@element-plus/icons-vue 2.3.1
- **开发语言**：JavaScript（ES6+）
- **样式**：CSS3 + Element Plus主题

## 项目结构

```
xuangu_demo/
├── web/                           # 前端项目目录
│   ├── public/                    # 静态资源目录
│   │   └── vite.svg              # Vite图标
│   ├── src/                      # 源代码目录
│   │   ├── api/                  # API接口模块
│   │   │   ├── index.js          # axios配置和基础请求方法
│   │   │   └── stockAPI.js       # 股票筛选相关API
│   │   ├── components/           # 组件目录
│   │   │   ├── DataRangeSelector/ # 数据范围选择器组件
│   │   │   │   └── DataRangeSelector.vue # 支持点击即选中、高亮显示的范围选择器
│   │   │   └── FilterPanel/      # 筛选面板组件
│   │   │       ├── FilterPanel.vue # 主筛选面板，支持选择器互斥显示
│   │   │       └── FilterItem.vue # 单个筛选项，支持快速取消功能
│   │   ├── router/               # 路由配置
│   │   │   └── index.js          # Vue Router配置，路由守卫和页面权限控制
│   │   ├── views/                # 页面视图
│   │   │   ├── Login.vue         # 用户登录页面，支持表单验证和状态管理
│   │   │   └── StockFilter.vue   # 股票筛选主页面，包含导航栏和退出登录功能
│   │   ├── mock/                 # Mock数据
│   │   │   └── stockData.js      # 模拟股票数据
│   │   ├── utils/                # 工具模块
│   │   │   └── constants.js      # 常量定义
│   │   ├── App.vue               # 根组件
│   │   └── main.js               # 应用入口
│   ├── package.json              # 前端项目配置和依赖
│   ├── package-lock.json         # 依赖锁定文件
│   ├── vite.config.js            # Vite构建配置
│   └── index.html                # HTML入口文件
├── server/                       # 后端服务目录
├── demo.py                       # Python演示脚本
├── .cursor/                      # Cursor IDE规则配置
│   └── rules/                    # 开发规则
└── README.md                     # 项目说明文档
```

## 后端 Redis 结构（主题/题材）

为了支持题材数据的查询与展示，新增以下 Redis 命名空间：

- 集合：`theme:{题材名}`
  - 含义：该题材对应的成分股代码集合（6 位代码，不含交易所后缀）
  - 示例：`SADD theme:中特估 600000 000001`

- 哈希：`theme:detail:{题材名}:{代码}`
  - 字段：
    - `code`：6 位股票代码
    - `name`：股票名称
    - `theme`：题材名称
    - `desc`：题材描述
    - `trade_date`：交易日（YYYYMMDD）
    - `ts_code`：原始 ts_code（如 600000.SH）
    - `con_code`：原始 con_code（如 600000.SH 或 000233.KP）
  - 示例：
    - 键：`theme:detail:中特估:600000`
    - 值：`{ code: "600000", name: "浦发银行", theme: "中特估", desc: "...", trade_date: "20250114", ts_code: "600000.SH", con_code: "600000.SH" }`

数据写入入口：`kaipanla/text.py` 中的 `concept_cons_to_redis()`。

## 快速开始

### 环境要求
- Node.js >= 16.0.0
- npm >= 8.0.0

### 安装依赖
```bash
cd web
npm install
```

### 启动开发服务器
```bash
cd web
npm run dev
```

项目将在 `http://localhost:3000` 启动

### 构建生产版本
```bash
cd web
npm run build
```

### 预览生产构建
```bash
cd web
npm run preview
```

## 使用说明

### 基本使用流程

1. **用户登录**
   - 访问系统首页会自动跳转到登录页面
   - 使用演示账号：用户名 `admin`，密码 `123456`
   - 支持"记住我"功能，下次访问自动登录
   - 登录成功后自动跳转到股票筛选页面

2. **选择筛选条件**
   - 在筛选面板中浏览各个筛选维度（基本面、技术面、资金面）
   - 点击任意筛选项（如"营业收入"）直接弹出数据范围选择器
   - 选择器显示在筛选项下方，提供更直观的选择体验
   - 点击任意数据范围（如"5~10"）即时选中，选择器自动关闭
   - 已选择的筛选项以蓝色背景显示，并在右侧显示取消按钮(×)
   - 同时只能打开一个选择器，打开新的会自动关闭其他的

3. **管理筛选条件**
   - 点击已选择项右侧的取消按钮(×)可快速移除单个条件
   - 使用"重置条件"或"清除条件"按钮一次性清除所有条件
   - 页面底部实时显示已选择的筛选条件数量

4. **查看筛选结果**
   - 筛选条件设置完成后，点击"开始筛选"按钮
   - 系统自动调用API接口查询符合条件的股票
   - 结果直接在筛选面板下方的表格中展示
   - 表格包含股票代码、名称、价格、涨跌幅、估值指标等信息

5. **查看股票详情**
   - 在结果表格中点击"查看详情"按钮
   - 弹出对话框显示股票的详细信息
   - 包含基本面、技术面、资金面等全面数据
   - 点击股票代码可直接跳转到外部股票详情页面

6. **退出登录**
   - 点击页面右上角的用户名下拉菜单
   - 选择"退出登录"选项
   - 确认后清除登录状态并跳转到登录页面

### 界面功能

#### 筛选面板功能
- **精准对齐**：分类标签右对齐，与筛选条件完美对齐，视觉一致性出色
- **标准化高度**：所有筛选标签统一32px高度，消除高度不一致问题
- **即时选择**：点击筛选项立即弹出选择器，无需额外确认步骤
- **高亮反馈**：已选择的数据范围实时高亮显示
- **快速取消**：每个已选择项都有独立的取消按钮
- **互斥显示**：同时只显示一个数据范围选择器
- **条件统计**：实时显示已选择的筛选条件数量
- **优化间距**：标准化标签间距设计，排列整齐美观

#### 结果展示功能
- **即时展示**：结果表格位于筛选面板正下方
- **固定高度**：表格高度固定，避免页面跳动
- **精准对齐**：所有数据列居中对齐，表头样式统一
- **数据格式化**：价格、百分比、数值自动格式化显示
- **颜色区分**：涨跌数据自动显示红涨绿跌，一目了然
- **斑马纹设计**：交替行背景色，大幅提升数据可读性
- **操作便捷**：每行都有优化的查看详情按钮
- **股票代码链接**：股票代码显示为可点击链接，支持外部跳转

#### 布局优化
- **紧凑设计**：标题左对齐，压缩各组件间距
- **空间高效**：筛选界面占据页面上半部分，结果表格占据下半部分
- **响应式适配**：移动端自动调整布局和字体大小

## API接口说明

### 主要接口

1. **获取筛选分类配置**
   ```javascript
   GET /stock/filter/categories
   ```

2. **获取筛选条件**
   ```javascript
   GET /stock/filter/conditions?category={categoryKey}
   ```

3. **根据条件筛选股票**
   ```javascript
   POST /stock/filter/search
   ```

4. **获取股票详情**
   ```javascript
   GET /stock/detail?stockCode={stockCode}
   ```

### Mock数据

项目内置Mock数据系统，开发环境下自动拦截API请求并返回模拟数据，包含：
- 完整的筛选条件配置
- 示例股票数据（平安银行、万科A、招商银行、五粮液、贵州茅台等）
- 股票详细信息

## 开发规范

### 代码规范
- 使用Vue 3 Composition API
- 组件嵌套不超过三层
- 统一使用Element Plus组件
- 遵循ES6+语法规范

### 文件命名
- 组件文件：PascalCase（如FilterPanel.vue）
- 工具文件：camelCase（如constants.js）
- API文件：camelCase + API后缀（如stockAPI.js）

### 样式规范
- 使用scoped样式避免全局污染
- 遵循Element Plus设计规范
- 支持响应式布局

## 项目特色

1. **卓越的用户体验**
   - 一键式数据范围选择：点击即选中，无需多步确认
   - 实时视觉反馈：选中状态立即高亮显示
   - 智能选择器管理：同时只显示一个选择器，避免界面混乱
   - 快速条件管理：每个选择项都有独立取消按钮
   - 流畅的交互动画：所有操作都有平滑的过渡效果

2. **精致的界面设计**
   - 精准对齐：筛选面板分类标签与条件完美对齐，视觉一致性出色
   - 统一标准：所有筛选标签统一32px高度，标准化间距设计
   - 数据可读性：表格采用斑马纹设计，涨跌数据颜色区分，提升阅读体验
   - 紧凑布局：最大化信息密度，减少无效空间
   - 左对齐标题：符合用户阅读习惯
   - 即时结果展示：筛选条件和结果在同一视图中
   - 固定表格高度：保持页面稳定性
   - 响应式适配：完美支持各种屏幕尺寸

3. **模块化设计**
   - 组件高度解耦
   - API接口统一管理
   - Mock数据完善

4. **可扩展性强**
   - 支持新增筛选维度
   - 易于添加新的筛选条件
   - 配置化的数据范围

## 许可证

MIT License

## 更新日志

### v1.4.0 (2025-01-14)
- 🔗 **新增股票代码链接功能**
  - 筛选结果表格中的股票代码现在显示为可点击链接
  - 点击股票代码可跳转到对应的外部股票详情页面
  - 链接格式：`http://localhost:3000/stock-filter/code_{股票代码}`
  - 支持常规筛选模式和主题模式下的股票代码链接
  - 添加悬停效果和视觉反馈，提升用户体验
  - 响应式设计，移动端自适应显示

### v1.3.0 (2025-01-14)
- 🎨 **界面对齐优化**
  - 完善筛选面板布局对齐：分类标签右对齐，与筛选条件完美对齐
  - 统一筛选条件标签高度：所有标签固定32px高度，消除高度不一致问题
  - 优化筛选条件间距：标准化标签间距（8px × 6px），排列更整齐
  - 改进垂直对齐：使用flexbox确保文字和图标完美居中对齐
- 📊 **数据表格优化**
  - 统一表头样式：标准化表头背景色和字体样式，增强视觉层次
  - 数据格式化增强：添加价格、百分比、数值的标准化显示格式
  - 涨跌颜色区分：涨跌数据自动显示对应颜色（红涨绿跌）
  - 斑马纹效果：交替行背景色，大幅提升数据可读性
  - 表格交互优化：悬停效果和操作按钮样式改进
- 🎯 **选择器对齐精准化**
  - 弹出框位置优化：与触发元素精确对齐，视觉更协调
  - 滚动条美化：自定义滚动条样式，界面更现代化
  - 视觉效果增强：增加背景模糊和阴影效果，提升层次感
  - Z-index优化：确保弹出框在正确的层级显示
- 🔧 **代码质量提升**
  - 重构CSS布局逻辑，使用现代化的flexbox布局
  - 优化样式代码结构，提高可维护性
  - 统一组件间距和对齐标准，建立设计系统

### v1.2.0 (2025-01-14)
- 🔐 **新增登录功能**
  - 添加用户登录页面，支持表单验证和状态管理
  - 实现路由守卫，保护需要登录的页面
  - 添加顶部导航栏，显示用户信息和退出登录功能
  - 支持"记住我"功能和登录状态持久化
- 🛡️ **安全性增强**
  - 实现页面访问权限控制
  - 登录状态检查和自动跳转
  - 退出登录确认对话框
- 🎨 **界面优化**
  - 设计精美的登录页面，采用渐变背景
  - 添加响应式导航栏，适配各种屏幕尺寸
  - 优化用户交互体验和视觉效果

### v1.1.0 (2025-01-14)
- ✨ **交互体验大幅优化**
  - 实现点击即选中逻辑，删除冗余的取消/确定按钮
  - 添加数据范围实时高亮显示功能
  - 实现选择器互斥显示，同时只能打开一个选择器
  - 新增单个数据范围的快速取消功能
- 🎨 **界面布局优化**
  - 将页面标题调整为左对齐显示
  - 全面压缩页面间距，提高空间利用率
  - 优化筛选条件面板的内部布局
  - 调整数据范围选择器显示位置（下方居中）
- 📈 **结果展示改进**
  - 在筛选条件下方直接添加结果表格
  - 表格支持固定高度，避免页面跳动
  - 新增更多股票信息列（营业收入、净利润、毛利率等）
  - 所有列数据居中对齐，提升可读性
- 🔧 **代码优化**
  - 重构数据范围选择器组件架构
  - 优化状态管理逻辑
  - 改进组件间通信机制

### v1.0.0 (2025-01-14)
- ✨ 初始版本发布
- 📦 基础筛选功能实现
- 🎨 用户界面设计完成
- 🔧 Mock数据系统搭建
- 📱 响应式布局适配 